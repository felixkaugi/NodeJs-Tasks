//cteate the user schema

// var MongoClient = require('mongodb').MongoClient
// //creating a connection
// var url = 'mongodb://localhost:27017/UsersDb'
// var dbschema = MongoClient.connect(url, function(err, db){
//     if(err) throw err;
//     console.log('Database Connected')
//     //create a user
//     var dbname = db.db('UsersDb')
//      dbname.collection('users').insertOne({
//     "Name": 'Kaugi', 
//     "Username": 'Kaugi',
//     "Password": '1234'}, function(err,res){
//         if(err) throw err
//         console.log("User Inserted")
//         dbname.collection('users').findOne({},function(err, results){
//             if(err) throw err
//             console.log(results.Username)
//         });
//         // results.forEach(row =>{
//         //     console.log(row)
//         //})
//     })
 
//     // var results = dbname.collection('users').find({});
//     // console.log(results.Name)
// })
// MongoClient.exports = MongoClient


//creating a post route
   app.post('/login', (req,res) =>{
        var Name = req.body.Name;
        var Username = req.body.Username;
        var Password = req.body.Password
        var data = {
            "Name": Name,
            "Username": Username,
            "Password": Password
        }
          conn= (function(err,db){
            db.collection('user_login').insertOne(data, function(err, collection){
                if(err) throw err;
                //comparing the data
                console.log(data)
                console.log("user Inserted successfully")
            })
          })
        
        
        return res.render('pages/sucess')
    })




    var MongoClient = require('mongodb').MongoClient 
var dbClass = {
    init: function(){
        var url = 'mongodb://localhost:27017/Login'
        var dbSchema = MongoClient.connect(url, function(err, db){
        if(err) throw err;
        console.log('Connected Sucessfully')
        })
    },
    //create records
    createRecords: function(data,db){
        this.init();
        dbname.collection('user_login').insertOne(data, function(err,results){
            if(err) throw err;
            console.log('user Create sucessfully')
            return callback(err,data)
        })
    }
}
module.exports = dbClass